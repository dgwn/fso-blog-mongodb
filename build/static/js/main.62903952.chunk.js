(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{141:function(e,t,n){},176:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=n(6),l=n.n(o),i=n(11),s=n(24),m=n(121),p=n(27),d=n(17),f=(n(141),n(227)),b=n(37),v=n(235),g=function(e){var t=e.handleLogin,n=e.username,a=e.setUsername,c=e.password,u=e.setPassword;return r.a.createElement(b.a,{align:"center"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(v.a,{value:n,onChange:function(e){var t=e.target;return a(t.value)},label:"Username",id:"username"})),r.a.createElement("div",null,r.a.createElement(v.a,{value:c,onChange:function(e){var t=e.target;return u(t.value)},label:"Password",type:"password",id:"password"})),r.a.createElement(f.a,{variant:"outlined",color:"primary",type:"submit",style:{marginTop:10},id:"login-button"},"Login"),r.a.createElement("br",null),r.a.createElement("br",null)))},h=function(e){e.newUserVisible;var t=e.setNewUserVisible,n=e.handleCreateUser,a=e.username,c=e.setUsername,u=e.password,o=e.setPassword,l=e.setName,i=e.name;return r.a.createElement(b.a,{align:"center",style:{zIndex:5,position:"absolute",top:"20vh",margin:"auto",backgroundColor:"white",padding:"80px",border:"1px solid black",boxShadow:"8px 8px 0px black"}},r.a.createElement("h4",null,"Create an Account"),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement(v.a,{value:a,onChange:function(e){var t=e.target;return c(t.value)},label:"Username",id:"username"})),r.a.createElement("div",null,r.a.createElement(v.a,{value:i,onChange:function(e){var t=e.target;return l(t.value)},label:"Name",type:"name",id:"name"})),r.a.createElement("div",null,r.a.createElement(v.a,{value:u,onChange:function(e){var t=e.target;return o(t.value)},label:"Password",type:"password",id:"password"})),r.a.createElement(f.a,{variant:"outlined",color:"primary",type:"submit",style:{margin:10},id:"login-button"},"Sign Me Up!"),r.a.createElement(f.a,{variant:"outlined",color:"secondary",style:{margin:10},id:"cancel",onClick:function(e){t(!1)}},"Cancel"),r.a.createElement("br",null),r.a.createElement("br",null)))},E=n(237),O=function(e){var t=e.notification;return r.a.createElement("div",{style:{zIndex:5,position:"absolute",top:"20vh",margin:"auto"}},r.a.createElement(E.a,{severity:"info",style:{padding:"80px",boxShadow:"8px 8px 0px black"}},t))},w=n(239),y=function(e){var t=e.createBlog,n=Object(a.useState)(""),c=Object(s.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)(""),i=Object(s.a)(l,2),m=i[0],p=i[1],d=Object(a.useState)("http://"),f=Object(s.a)(d,2),b=f[0],g=f[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:u,author:m,url:b}),o(""),p(""),g("http://")},id:"blogForm"},r.a.createElement("div",null,r.a.createElement(v.a,{value:u,onChange:function(e){var t=e.target;return o(t.value)},label:"Title",id:"titleInput"})),r.a.createElement("div",null,r.a.createElement(v.a,{value:m,onChange:function(e){var t=e.target;return p(t.value)},label:"Author",id:"authorInput"})),r.a.createElement("div",null,r.a.createElement(v.a,{value:b,type:"url",onChange:function(e){var t=e.target;return g(t.value)},label:"URL",id:"urlInput"})),r.a.createElement(w.a,{primary:!0,type:"submit",margin:{top:"small"},label:"Submit"}),r.a.createElement("br",null),r.a.createElement("br",null))},j=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(s.a)(n,2),u=c[0],o=c[1],l={display:u?"none":""},i={display:u?"":"none"},m=function(){o(!u)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:m}})),r.a.createElement(b.a,{align:"center",justify:"center"},r.a.createElement("div",{style:l},r.a.createElement(w.a,{secondary:!0,onClick:m,margin:{top:"small"},label:e.buttonLabel})),r.a.createElement("div",{style:i,className:"togglableContent"},e.children,r.a.createElement(w.a,{secondary:!0,onClick:m,label:"Cancel"})))}));j.displayName="Togglable";var k,x=j,C=n(236),I=n(124),S=function(e){var t=e.users.map((function(e){return{name:e.name,id:e.id,blogs:e.blogs.length}}));return r.a.createElement("div",null,r.a.createElement(C.a,{columns:[{property:"name",header:r.a.createElement(I.a,null,"User"),primary:!0,render:function(e){return r.a.createElement(p.b,{to:"/users/".concat(e.id)},e.name)}},{property:"blogs",header:"Number of Blogs"}],data:t}))},T=n(229),N=function(e){var t=Object(d.g)().id;console.log(e);var n=e.users.find((function(e){return e.id===t}));if(!n)return null;var a=n.blogs.map((function(e){return{id:e.id,title:e.title}}));return r.a.createElement("div",null,r.a.createElement("h2",null,n.name),r.a.createElement("h4",null,"Added Blogs:"),r.a.createElement(T.a,{data:a,pad:"small"},(function(e){return r.a.createElement(p.b,{to:"/blogs/".concat(e.id)},e.title)})))},U=n(32),L=function(e){return function(){var t=Object(i.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:"SET_NOTIFICATION",data:{content:e}});case 2:clearTimeout(k),k=setTimeout((function(){n(A())}),2e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(){return{type:"RESET_NOTIFICATION"}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":var n=t.data.content;return n;case"RESET_NOTIFICATION":return null;default:return e}},R=n(78),M=n(55),_=n(29),G=n.n(_),V="/api/blogs",F=null,P={getAll:function(){return G.a.get(V).then((function(e){return e.data}))},create:function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:F}},e.next=3,G.a.post(V,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),patch:function(){var e=Object(i.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={likes:n},e.next=3,G.a.patch(V+"/"+t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),commentPost:function(){var e=Object(i.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={comments:n},e.next=3,G.a.post(V+"/"+t+"/comments",a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:F}},e.next=3,G.a.delete(V+"/"+t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){F="bearer ".concat(e)}},D=function(){return(1e5*Math.random()).toFixed(0)},z=function(e){return function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(i.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.create(e);case 2:a=t.sent,n({type:"CREATE_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(e,t){return function(){var n=Object(i.a)(l.a.mark((function n(a){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.patch(e,t+1);case 2:r=n.sent,a({type:"VOTE",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},H=function(e,t,n){return function(){var a=Object(i.a)(l.a.mark((function a(r){var c,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=[].concat(Object(R.a)(t),[n]),a.next=3,P.commentPost(e,c);case 3:u=a.sent,r({type:"COMMENT",data:u});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(i.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.remove(e);case 2:n({type:"REMOVE_BLOG",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"CREATE_BLOG":var n=Object(M.a)(Object(M.a)({},t.data.data.blog),{},{id:D()});return[].concat(Object(R.a)(e),[n]);case"VOTE":var a=t.data.data.blog.id,r=e.find((function(e){return e.id===a})),c=Object(M.a)(Object(M.a)({},r),{},{likes:r.likes+1});return e.map((function(e){return e.id!==a?e:c}));case"COMMENT":return e;case"REMOVE_BLOG":var u=t.data;return e.filter((function(e){return e.id!==u}));default:return e}},Q=n(230),X=n(242),Y=n(231),Z=n(243),$=n(232),ee=n(233),te=function(e){var t=Object(d.g)().id,n=e.blogs.find((function(e){return e.id===t})),c=Object(U.b)(),u=Object(d.f)(),o=Object(a.useState)(""),m=Object(s.a)(o,2),p=m[0],f=m[1],g=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c(A()),c(W(t.id,t.likes)),c(L('"'.concat(t.title,'" has been updated to ').concat(t.likes+1," likes")))}catch(n){c(L("Error updating blog"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.preventDefault(),c(A()),c(L("comment has been added")),c(H(n.id,n.comments,p)),f("")}catch(a){c(L("Error adding comment"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c(q(t.id)),c(L('"'.concat(t.title,'" has been deleted'))),u.push("/")}catch(n){c(L("Error deleting blog"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"blog"},r.a.createElement(Q.a,{height:"auto",width:"medium",background:"light-3",margin:"10px"},r.a.createElement(X.a,{pad:"medium"},r.a.createElement("h2",null,'"',n.title,'" - ',n.author)),r.a.createElement(Y.a,{pad:"medium",gap:"none",background:"light-1"},r.a.createElement("p",null,n.url),r.a.createElement("p",null,"added by ",n.user.name),r.a.createElement("h3",null,"Comments:"),r.a.createElement("ul",null,n.comments.map((function(e){return r.a.createElement("li",{key:(1e5*Math.random()).toFixed(0)},e)}))),r.a.createElement("form",{onSubmit:h,id:"blogForm"},r.a.createElement(b.a,{direction:"row",justify:"around"},r.a.createElement("div",null,r.a.createElement(v.a,{value:p,onChange:function(e){var t=e.target;return f(t.value)},label:"Comment",id:"commentInput"})),r.a.createElement(w.a,{primary:!0,type:"submit",margin:{top:"small"},label:"Submit"}),r.a.createElement("br",null),r.a.createElement("br",null)))),r.a.createElement(Z.a,{pad:{horizontal:"medium"},background:"light-2"},r.a.createElement(w.a,{icon:r.a.createElement($.a,{color:"red",onClick:function(){return g(n)}}),hoverIndicator:!0}),r.a.createElement("p",null,n.likes," Likes"),r.a.createElement(w.a,{icon:r.a.createElement(ee.a,{color:"plain",onClick:function(){window.confirm("Do you really want to remove this blog?")&&E(n)}}),hoverIndicator:!0}))))},ne={textDecoration:"none",color:"black",":hover":{color:"red"},alignContent:"center",height:"100%"},ae=function(){return r.a.createElement("div",{style:{width:"100%",height:"auto",display:"flex",justifyContent:"space-evenly",backgroundColor:"#e6f2fd",marginTop:"0"}},r.a.createElement(p.b,{to:"/",style:ne},r.a.createElement("h3",null,"Blogs")),"\xa0",r.a.createElement(p.b,{to:"/users",style:ne},r.a.createElement("h3",null,"Users")))},re={login:function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newUser:function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce=n(234),ue=n(241),oe=n(240),le=n(117),ie=function(e){return function(){var t=Object(i.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:"LOGIN",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=t.data;return n;case"LOGOUT":return null;default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data.data;default:return e}},pe=function(e){var t=e.children,n=e.areas,a=Object(m.a)(e,["children","areas"]),c=r.a.useContext(ce.a);return r.a.createElement(ue.a,Object.assign({areas:n[c]},a),t)},de=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),m=o[0],f=o[1],v=Object(a.useState)(""),E=Object(s.a)(v,2),j=E[0],k=E[1],C=Object(a.useState)(!1),I=Object(s.a)(C,2),T=I[0],B=I[1],R=Object(U.b)(),M=Object(U.c)((function(e){return e.notification})),_=Object(U.c)((function(e){return e.blogs})),V=Object(U.c)((function(e){return e.user})),F=Object(U.c)((function(e){return e.users}));Object(a.useEffect)((function(){R(z()),R(function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("/api/users");case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[M,R]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);R(ie(t)),P.setToken(t.token)}}),[R]);var D=Object(le.deepMerge)({global:{font:{family:"Roboto",size:"18px",height:"20px"},breakpoints:{small:{value:900},desktop:{value:1500}}}}),H=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,re.login({username:n,password:m});case 4:a=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(a)),P.setToken(a.token),R(ie(a)),R(L("Logged in")),c(""),f(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),R(L("Wrong credentials"));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(j),e.next=4,re.newUser({username:n,name:j,password:m});case 4:R(L("New user created")),c(""),f(""),k(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),R(L("Error"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(e){e.preventDefault(),B(!0)},Q=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.removeItem("loggedBlogAppUser"),R({type:"LOGOUT"}),R(L("Logged out")),c(""),f("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Z.current.toggleVisibility(),R(J(t)),R(L('"'.concat(t.title,'" has been added')))}catch(n){R(L("Error posting blog"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{R(A()),R(W(t.id,t.likes)),R(L('"'.concat(t.title,'" has been updated to ').concat(t.likes+1," likes")))}catch(n){R(L("Error updating blog"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Object(a.useRef)();return r.a.createElement(oe.a,{theme:D},r.a.createElement(ce.a.Consumer,null,(function(e){return r.a.createElement(pe,{responsive:!0,rows:["xsmall","auto","auto"],columns:["auto","auto"],gap:"small",areas:{small:[{name:"nav",start:[0,0],end:[1,0]},{name:"login",start:[0,1],end:[1,1]},{name:"blogs",start:[0,2],end:[1,2]}],desktop:[{name:"nav",start:[0,0],end:[1,0]},{name:"login",start:[0,1],end:[0,1]},{name:"blogs",start:[1,1],end:[1,1]}]}},r.a.createElement(p.a,null,r.a.createElement(b.a,{gridArea:"nav"},r.a.createElement(ae,null),null!==M&&r.a.createElement(O,{notification:M})),r.a.createElement(b.a,{gridArea:"login",align:"center"},r.a.createElement("h2",null,"Blogs"),null===V&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{handleLogin:H,username:n,setUsername:c,password:m,setPassword:f}),!0===T&&r.a.createElement(h,{newUserVisible:T,setNewUserVisible:B,handleCreateUser:q,username:n,setUsername:c,password:m,setPassword:f,setName:k,name:j}),r.a.createElement(w.a,{variant:"outlined",onClick:K,label:"Sign Me Up!"})),null!==V&&r.a.createElement(b.a,{align:"center"},r.a.createElement("div",null,"Welcome ",V.name),r.a.createElement("div",null,r.a.createElement(w.a,{primary:!0,onClick:Q,color:"status-critical",label:"Logout"}))),null!==V&&r.a.createElement(x,{buttonLabel:"Post Blog",ref:Z},r.a.createElement(y,{createBlog:X}))),r.a.createElement(b.a,{gridArea:"blogs",align:"center",alignContent:"center"},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/users/:id"},r.a.createElement(N,{users:F})),r.a.createElement(d.a,{path:"/users"},r.a.createElement(S,{users:F})),r.a.createElement(d.a,{path:"/blogs/:id"},r.a.createElement(te,{blogs:_,updateLikes:Y})),r.a.createElement(d.a,{path:"/"},r.a.createElement("div",null,_.sort((function(e,t){return t.likes-e.likes})).map((function(e){return r.a.createElement("div",{key:e.id,style:{border:"1px solid black",marginBottom:".5rem",padding:"1rem",width:"20rem"}},r.a.createElement(p.b,{to:"/blogs/".concat(e.id)},e.title))}))))))))})))},fe=n(41),be=n(118),ve=n(119),ge=Object(fe.combineReducers)({user:se,users:me,blogs:K,notification:B}),he=Object(fe.createStore)(ge,Object(ve.composeWithDevTools)(Object(fe.applyMiddleware)(be.a)));P.getAll().then((function(e){return e.forEach((function(e){he.dispatch(z())}))}));var Ee=he;u.a.render(r.a.createElement(U.a,{store:Ee},r.a.createElement(de,null)),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.62903952.chunk.js.map